<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        
        
        
        <link rel="shortcut icon" href="../img/favicon.ico">
        <title>示例和功能 - Bmob Docs</title>
        <link href="../css/bootstrap-custom.min.css" rel="stylesheet">
        <link href="../css/font-awesome-4.5.0.css" rel="stylesheet">
        <link href="../css/base.css" rel="stylesheet">
        <link rel="stylesheet" href="../css/highlight.css">
        <!-- HTML5 shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!--[if lt IE 9]>
            <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
            <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
        <![endif]-->
	
	<script src="../js/jquery-1.10.2.min.js"></script>
        <script src="../js/bootstrap-3.0.3.min.js"></script>
        <script src="../js/highlight.pack.js"></script> 
    </head>

    <body>

        <div class="navbar navbar-default navbar-fixed-top" role="navigation">
    <div class="container">

        <!-- Collapsed navigation -->
        <div class="navbar-header">
            <!-- Expander button -->
            <button type="button" class="navbar-toggle" data-toggle="collapse" data-target=".navbar-collapse">
                <span class="sr-only">Toggle navigation</span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
                <span class="icon-bar"></span>
            </button>
            <a class="navbar-brand" href="../index.html">Bmob Docs</a>
        </div>

        <!-- Expanded navigation -->
        <div class="navbar-collapse collapse">
                <!-- Main navigation -->
                <ul class="nav navbar-nav">
                    <li >
                        <a href="../index.html">快速入门</a>
                    </li>
                    <li >
                        <a href="../develop/index.html">开发文档</a>
                    </li>
                    <li class="active">
                        <a href="index.html">示例和功能</a>
                    </li>
                    <li >
                        <a href="../autoupdate/index.html">自动更新</a>
                    </li>
                    <li >
                        <a href="../errorcode/index.html">错误码</a>
                    </li>
                    <li >
                        <a href="../common_problem/README/index.html">常见问题</a>
                    </li>
                    <li >
                        <a href="../update_log/README/index.html">更新日志</a>
                    </li>
                </ul>

            <ul class="nav navbar-nav navbar-right">
                <li>
                    <a href="#" data-toggle="modal" data-target="#mkdocs_search_modal">
                        <i class="fa fa-search"></i> Search
                    </a>
                </li>
                    <li >
                        <a rel="next" href="../develop/index.html">
                            <i class="fa fa-arrow-left"></i> Previous
                        </a>
                    </li>
                    <li >
                        <a rel="prev" href="../autoupdate/index.html">
                            Next <i class="fa fa-arrow-right"></i>
                        </a>
                    </li>
            </ul>
        </div>
    </div>
</div>

        <div class="container">
                <div class="col-md-3"><div class="bs-sidebar hidden-print affix well" role="complementary">
    <ul class="nav bs-sidenav">
        <li class="main active"><a href="#_1">失物招领案例教程</a></li>
            <li><a href="#_2">需求描述</a></li>
            <li><a href="#_3">数据结构设计</a></li>
            <li><a href="#sdk">初始化SDK</a></li>
            <li><a href="#_4">创建数据模型类</a></li>
            <li><a href="#_5">添加失物及招领信息</a></li>
            <li><a href="#_6">获取失物及招领列表</a></li>
            <li><a href="#_7">删除失物及招领信息</a></li>
            <li><a href="#_8">后记</a></li>
            <li><a href="#_9">案例下载</a></li>
        <li class="main "><a href="#_10">上传文件案例教程</a></li>
            <li><a href="#_11">上传文件需求描述</a></li>
            <li><a href="#_12">上传文件数据结构设计</a></li>
            <li><a href="#sdk_1">安装和初始化SDK</a></li>
            <li><a href="#_13">创建模型类文件</a></li>
            <li><a href="#_14">上传一条单个文件的数据</a></li>
            <li><a href="#_15">批量上传多条单个文件的数据</a></li>
            <li><a href="#_16">上传一条多个文件的数据</a></li>
            <li><a href="#_17">批量上传多条多个文件的数据</a></li>
            <li><a href="#_18">上传文件后记</a></li>
        <li class="main "><a href="#_19">反馈案例教程</a></li>
            <li><a href="#_20">反馈案例需求描述</a></li>
            <li><a href="#_21">反馈案例数据结构设计</a></li>
            <li><a href="#_22">安装和初始化</a></li>
            <li><a href="#_23">发送反馈功能的开发</a></li>
            <li><a href="#_24">查看反馈功能的开发</a></li>
            <li><a href="#_25">反馈案例后记</a></li>
            <li><a href="#_26">反馈案例案例下载</a></li>
        <li class="main "><a href="#_27">其它案例</a></li>
    </ul>
</div></div>
                <div class="col-md-9" role="main">

<h2 id="_1">失物招领案例教程</h2>
<h3 id="_2">需求描述</h3>
<p>为演示Bmob提供的云数据库的功能，本文制作了一个失物招领的简单案例，实现物品的发布、修改、呈现和删除，展示如何使用Bmob快速开发一个有后端数据库的应用软件。使用场景如下：用户捡到物品，打开手机软件，填写物品的招领信息（标题、描述和联系方式）；用户丢失物品，打开手机软件，填写物品的丢失信息（标题、描述和联系方式）；任何人都可以查看到失物和招领的信息列表，可以对发布的信息进行删除。</p>
<p><strong>说明一点的是，因为是演示案例，所以信息的添加和删除并没有进行用户身份验证。</strong></p>
<p>本案例将使用到Bmob的如下功能：</p>
<p>1.添加数据</p>
<p>添加失物/招领信息到服务器中。</p>
<p>2.查找数据</p>
<p>在列表中显示所有用户发布的失物/招领信息。</p>
<p>3.删除数据</p>
<p>删除已发布的失物/招领信息。</p>
<p>本案例最终实现的部分界面效果如下：</p>
<p><img alt="" src="../image/flash.jpg" /> </p>
<p>失物招领软件闪图</p>
<p><img alt="" src="../image/lost.jpg" /> </p>
<p>招领列表页</p>
<p><img alt="" src="../image/edit.png" /> </p>
<p>失物编辑删除功能</p>
<p><img alt="" src="../image/add_b.jpg" /> </p>
<p>添加失物信息</p>
<h3 id="_3">数据结构设计</h3>
<p>本案例的数据结构非常简单，只需要设计两个表，一个是失物表（Lost表），一个是招领表（Found表），对应的数据结构如下（省略对常用默认字段objectId、createAt、updateAt的描述，对于还不知道怎么创建应用和添加数据表的开发朋友请先移步<a href="http://docs.bmob.cn/data/Android/a_faststart/doc/index.html" title="快速入门指南">快速入门指南</a>查看相关教程）：</p>
<p>失物表（Lost）</p>
<table>
<thead>
<tr>
<th align="left">字段名</th>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">describe</td>
<td align="left">String</td>
<td align="left">失物的描述信息</td>
</tr>
<tr>
<td align="left">phone</td>
<td align="left">String</td>
<td align="left">联系的手机号码</td>
</tr>
<tr>
<td align="left">title</td>
<td align="left">String</td>
<td align="left">失物的标题信息</td>
</tr>
</tbody>
</table>
<p>招领表（Found）</p>
<table>
<thead>
<tr>
<th align="left">字段名</th>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">describe</td>
<td align="left">String</td>
<td align="left">招领的描述信息</td>
</tr>
<tr>
<td align="left">phone</td>
<td align="left">String</td>
<td align="left">联系的手机号码</td>
</tr>
<tr>
<td align="left">title</td>
<td align="left">String</td>
<td align="left">招领的标题信息</td>
</tr>
</tbody>
</table>
<h3 id="sdk">初始化SDK</h3>
<p>Bmob为每个应用都提供了一个唯一标识（对应为开发者后台应用中的“应用密钥-&gt;Application ID”），使用Bmob开发的应用都要首先使用这个Application ID”进行初始化。对应代码如下（详细代码实现参看BaseActivity类）：</p>
<pre><code class="java">protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //初始化 Bmob SDK，第一个参数为上下文，第二个参数为Application ID
    Bmob.initialize(this, Constants.Bmob_APPID);
    //其他代码
}
</code></pre>

<h3 id="_4">创建数据模型类</h3>
<p>为操作Bmob的云端数据库，SDK首先需要创建数据表对应的模型类（模型类的名称必须和云端数据表的名称一致），该类需要继承自BmobObject，实现刚刚创建的数据表字段的set和get方法（系统默认字段objectId、createAt、updateAt不需要声明）。因为本案例需要操作Lost表和Found表，因此需要创建Lost类和Found类。下面是Lost模型类的实现代码（Found模型类的实现代码略）：</p>
<pre><code class="java">public class Lost extends BmobObject{

    private String title;//标题
    private String describe;//描述
    private String phone;//联系手机
    public String getTitle() {
        return title;
    }
    public void setTitle(String title) {
        this.title = title;
    }
    public String getDescribe() {
        return describe;
    }
    public void setDescribe(String describe) {
        this.describe = describe;
    }
    public String getPhone() {
        return phone;
    }
    public void setPhone(String phone) {
        this.phone = phone;
    }
}

</code></pre>

<h3 id="_5">添加失物及招领信息</h3>
<p>用户填写了失物信息之后，只需要构造一个Lost实例，然后简单调用模型类的insertObject方法（第一个参数是上下文，第二个参数是插入信息的回调类）就可以将信息添加到云数据库中，实现代码如下（详细代码实现参看AddActivity类）：</p>
<pre><code class="java">        Lost lost = new Lost();
        lost.setDescribe(describe);
        lost.setPhone(photo);
        lost.setTitle(title);
        lost.save(this, new SaveListener() {

            @Override
            public void onSuccess() {
                ShowToast(&quot;失物信息添加成功!&quot;);
                //其他代码
            }

            @Override
            public void onFailure(int code, String arg0) {
                ShowToast(&quot;添加失败:&quot;+arg0);
            }
        });
</code></pre>

<h3 id="_6">获取失物及招领列表</h3>
<p>Bmob提供了复杂和简单的查询方法，可以对查询结果进行排序，可以对结果进行缓存。本案例只使用到Bmob提供的最简单的查询和排序功能，直接调用BmobQuery类的findObjects方法和order方法来获取失物列表，实现代码如下（详细代码实现参看MainActivity类）：</p>
<pre><code class="java">        BmobQuery&lt;Lost&gt; query = new BmobQuery&lt;Lost&gt;();
        //按照时间降序
        query.order(&quot;-createdAt&quot;);
        //执行查询，第一个参数为上下文，第二个参数为查找的回调
        query.findObjects(this, new FindListener&lt;Lost&gt;() {

            @Override
            public void onSuccess(List&lt;Lost&gt; losts) {
                .....
                //将结果显示在列表中
                LostAdapter.addAll(losts);
                .....
            }

            @Override
            public void onError(int code, String arg0) {
                showErrorView(0);
            }
        });
</code></pre>

<h3 id="_7">删除失物及招领信息</h3>
<p>Bmob云数据库对每条新增的数据都有一个唯一标识（objectId），这类似于传统SQL数据库中的唯一主键的性质。从云数据库中删除某条记录需要设置这个要删除的ObjectId的信息，再调用模型类的deleteObject方法就可以了，实现代码如下（详细代码实现参看MainActivity类的deleteLost方法）：</p>
<pre><code class="java">        Lost lost = new Lost();
        //设置ObjectId信息
        lost.setObjectId(LostAdapter.getItem(position).getObjectId());
        //执行删除方法，第一个参数为上下文，第二个参数为删除的回调
        lost.delete(this, new DeleteListener() {

            @Override
            public void onSuccess() {
                //删除成功
                LostAdapter.remove(position);
            }

            @Override
            public void onFailure(int code, String arg0) {
                //删除失败
            }
        });
</code></pre>

<h3 id="_8">后记</h3>
<p>本案例只是演示如何用Bmob进行快速的数据增删改查，在真实的应用环境下，你还可能还需要使用到用户系统、文件服务、更复杂的数据结构和服务，这些都可以使用Bmob就可以实现。如果想要获取更多的信息，请各位查看Bmob的<a href="http://docs.bmob.cn/data/Android/b_developdoc/doc/index.html" title="开发文档">开发文档</a>或者联系技术客服。欢迎砸砖，欢迎提出更多的意见和建议帮助Bmob更好的发展。谢谢～</p>
<h3 id="_9">案例下载</h3>
<p><a href="https://github.com/bmob/bmob-app-demo-show/blob/master/download/Bmob_Sample_lost_found.zip" title="失物招领案例下载">失物招领案例下载</a></p>
<h2 id="_10">上传文件案例教程</h2>
<h3 id="_11">上传文件需求描述</h3>
<p>相对于移动网络和数据服务而言，文件服务往往需要更长的i/o时间，因此也就涉及到更多的异步操作的问题。不少朋友在用到Bmob文件服务的时候出错，原因就是没有充分理解同步和异步的本质。为方便大家理解Bmob的文件服务，这里提供一个上传文件的案例，从如何往一个只有一列文件字段的表中插入一条或者多条，到如何往一个有两列甚至多列文件字段的表中插入一条或者多条数据进行详细阐述。</p>
<p>案例的界面效果如下：</p>
<p><img alt="" src="../image/uploadfile.png" /> </p>
<h3 id="_12">上传文件数据结构设计</h3>
<p>本案例的数据结构非常简单，只需要设计两个表，一个是电影表（Movie表，只有一个File字段），一个是音乐表（Music表，有两个File字段），对应的数据结构如下（省略对常用默认字段objectId、createAt、updateAt的描述，对于还不知道怎么创建应用和添加数据表的开发朋友请先移步<a href="http://docs.bmob.cn/data/Android/a_faststart/doc/index.html" title="快速入门指南">快速入门指南</a>查看相关教程）：</p>
<p>电影表（Movie表）</p>
<table>
<thead>
<tr>
<th align="left">字段名</th>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">name</td>
<td align="left">String</td>
<td align="left">电影名称</td>
</tr>
<tr>
<td align="left">file</td>
<td align="left">File</td>
<td align="left">电影文件</td>
</tr>
</tbody>
</table>
<p>音乐表（Music表）</p>
<table>
<thead>
<tr>
<th align="left">字段名</th>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">name</td>
<td align="left">String</td>
<td align="left">歌曲名称</td>
</tr>
<tr>
<td align="left">artist</td>
<td align="left">String</td>
<td align="left">艺术家</td>
</tr>
<tr>
<td align="left">mp3</td>
<td align="left">File</td>
<td align="left">mp3文件</td>
</tr>
<tr>
<td align="left">lrc</td>
<td align="left">File</td>
<td align="left">歌词文件</td>
</tr>
</tbody>
</table>
<h3 id="sdk_1">安装和初始化SDK</h3>
<p>Bmob为每个应用都提供了一个唯一标识（对应为开发者后台应用中的“应用密钥-&gt;Application ID”），使用Bmob开发的应用都要首先使用这个Application ID”进行初始化。对应代码如下（详细代码实现参看BaseActivity类，PS：大家可以顺便体会下创建BaseActivity类的好处^_^）：</p>
<pre><code class="java">protected void onCreate(Bundle savedInstanceState) {
    super.onCreate(savedInstanceState);
    //初始化 Bmob SDK，第一个参数为上下文，第二个参数为Application ID
    Bmob.initialize(this, Constants.Bmob_APPID);
    //其他代码
}
</code></pre>

<h3 id="_13">创建模型类文件</h3>
<p>为操作Bmob的云端数据库，SDK首先需要创建数据表对应的模型类（模型类的名称必须和云端数据表的名称一致），该类需要继承自BmobObject，实现刚刚创建的数据表字段的set和get方法（系统默认字段objectId、createAt、updateAt不需要声明）。因为本案例需要操作Movie表和Music表，因此需要创建Movie类和Music类。下面是Movie模型类的实现代码（Music模型类的实现代码略）：</p>
<pre><code class="java">
public class Movie extends BmobObject {
private String name;//电影名称
private BmobFile file;//电影文件

public Movie(){
}

public Movie(String name,BmobFile file){
    this.name =name;
    this.file = file;
}

public String getName() {
    return name;
}

public void setName(String name) {
    this.name = name;
}

public BmobFile getFile() {
    return file;
}

public void setFile(BmobFile file) {
    this.file = file;
}
}

</code></pre>

<h3 id="_14">上传一条单个文件的数据</h3>
<p>往Movie表中添加一条数据非常简单，只需要等到文件上传（BmobFile类的upload方法上传）成功之后，再调用数据服务的insertObject方法将这条数据插入到云数据库中就可以了。实现代码如下：</p>
<pre><code class="java">
final BmobFile bmobFile = new BmobFile(file);
bmobFile.uploadblock(this, new UploadFileListener() {

    @Override
    public void onSuccess() {
        // TODO Auto-generated method stub
        Log.i(TAG, &quot;电影文件上传成功，返回的名称--&quot;+bmobFile.getFileUrl(MainActivity.this));
        insertObject(new Movie(&quot;冰封：重生之门&quot;,bmobFile));
    }

    @Override
    public void onProgress(Integer arg0) {
        // TODO Auto-generated method stub
    }

    @Override
    public void onFailure(int arg0, String arg1) {
        // TODO Auto-generated method stub
        ShowToast(&quot;--&gt;uploadMovoieFile--&gt;onFailure:&quot; + arg0+&quot;,msg = &quot;+arg1);
    }

});

</code></pre>

<h3 id="_15">批量上传多条单个文件的数据</h3>
<p>往Movie表中插入多条数据时，本案例的实现逻辑是：先调用Bmob提供的批量上传文件的方法，等所有文件都上传成功之后，再进行数据的批量添加操作（见下面的代码片段B）。代码片段A如下：</p>
<pre><code class="java">
public void insertBatchDatasWithOne(){
String[] filePaths = new String[2];
filePaths[0] = filePath_mp3;
filePaths[1] = filePath_lrc;
//批量上传是会依次上传文件夹里面的文件
Bmob.uploadBatch(this, filePaths, new UploadBatchListener() {

    @Override
    public void onSuccess(List&lt;BmobFile&gt; files,List&lt;String&gt; urls) {
        // TODO Auto-generated method stub
        Log.i(&quot;life&quot;,&quot;insertBatchDatasWithOne -onSuccess :&quot;+urls.size()+&quot;-----&quot;+files+&quot;----&quot;+urls);
        if(urls.size()==1){//如果第一个文件上传完成
            Movie movie =new Movie(&quot;哈利波特1&quot;,files.get(0));
            movies.add(movie);
        }else if(urls.size()==2){//第二个文件上传成功
            Movie movie1 =new Movie(&quot;哈利波特2&quot;,files.get(1));
            movies.add(movie1);
            insertBatch(movies);
        }
    }

    @Override
    public void onError(int statuscode, String errormsg) {
        // TODO Auto-generated method stub
        ShowToast(&quot;错误码&quot;+statuscode +&quot;,错误描述：&quot;+errormsg);
    }

    @Override
    public void onProgress(int curIndex, int curPercent, int total,
            int totalPercent) {
        // TODO Auto-generated method stub
        Log.i(&quot;life&quot;,&quot;insertBatchDatasWithOne -onProgress :&quot;+curIndex+&quot;---&quot;+curPercent+&quot;---&quot;+total+&quot;----&quot;+totalPercent);
    }
});

}
</code></pre>

<p>代码片段B如下：</p>
<pre><code class="java">
public void insertBatch(List&lt;BmobObject&gt; files){
    new BmobObject().insertBatch(MainActivity.this, files, new SaveListener() {

        @Override
        public void onSuccess() {
            // TODO Auto-generated method stub
            ShowToast(&quot;----&gt;批量更新成功&quot;);
        }

        @Override
        public void onFailure(int arg0, String arg1) {
            // TODO Auto-generated method stub
            ShowToast(&quot;----&gt;批量更新失败&quot;+arg0);

        }
    });
}
</code></pre>

<p><strong>注：BmobSDK_v3.2.7版本提供了文件批量上传的方法，支持一键上传多个文件，非常方便和实用。</strong></p>
<h3 id="_16">上传一条多个文件的数据</h3>
<p>往Music表中插入一条有两个文件的数据的逻辑跟前面的类似，首先进行文件的同步上传操作，示例代码如下：</p>
<pre><code class="java">
String[] filePaths = new String[2];
filePaths[0] = filePath_mp3;
filePaths[1] = filePath_lrc;
Bmob.uploadBatch(this, filePaths, new UploadBatchListener() {

    @Override
    public void onSuccess(List&lt;BmobFile&gt; files,List&lt;String&gt; urls) {
        // TODO Auto-generated method stub
        Log.i(&quot;life&quot;,&quot;insertDataWithMany -onSuccess :&quot;+urls.size()+&quot;-----&quot;+files+&quot;----&quot;+urls);
        if(urls.size()==2){//如果全部上传完，则更新该条记录
            Song song =new Song(&quot;汪峰0&quot;,&quot;北京北京0&quot;,files.get(0),files.get(1));
            insertObject(song);
        }else{
            //有可能上传不完整，中间可能会存在未上传成功的情况，你可以自行处理
        }
    }

    @Override
    public void onError(int statuscode, String errormsg) {
        // TODO Auto-generated method stub
        ShowToast(&quot;错误码&quot;+statuscode +&quot;,错误描述：&quot;+errormsg);
    }

    @Override
    public void onProgress(int curIndex, int curPercent, int total,
            int totalPercent) {
        // TODO Auto-generated method stub
        Log.i(&quot;life&quot;,&quot;insertBatchDatasWithOne -onProgress :&quot;+curIndex+&quot;---&quot;+curPercent+&quot;---&quot;+total+&quot;----&quot;+totalPercent);
    }
});
</code></pre>

<p>上传成功之后，再进行数据的添加操作。示例代码如下：</p>
<pre><code class="java">
private void insertObject(final BmobObject obj){
    obj.save(MainActivity.this, new SaveListener() {

        @Override
        public void onSuccess() {
            // TODO Auto-generated method stub
            ShowToast(&quot;--&gt;创建数据成功：&quot; + obj.getObjectId());

        }

        @Override
        public void onFailure(int arg0, String arg1) {
            // TODO Auto-generated method stub
            ShowToast(&quot;--&gt;创建数据失败：&quot; + arg0+&quot;,msg = &quot;+arg1);
        }
    });
}

</code></pre>

<h3 id="_17">批量上传多条多个文件的数据</h3>
<p>往Music表中插入多条有两个文件的逻辑也一样，同样先进行文件的批量上传操作，最后进行批量更新操作。由于代码都非常相似，这里就不再一一详细阐述，想要知道实现代码的朋友可以直接下载我们的案例代码进行查看。</p>
<h3 id="_18">上传文件后记</h3>
<p>文件上传是移动领域最基础的服务，BmobSDK_v3.2.7提供了批量上传文件的方法，此方法大大简化了开发者对文件的批量操作，也欢迎大家提出更多的意见和建议帮助Bmob更好的发展。谢谢～</p>
<p><strong>注：如需查看该文的相关代码，可自行去官网下载的BmobSDK_v3.2.7版本下的BmobExample示例工程中BmobFileActivity类查看。也可以去bodismile的github地址<a href="https://github.com/bodismile/bmob-android-upload-file">https://github.com/bodismile/bmob-android-upload-file</a> 查看。</strong></p>
<h2 id="_19">反馈案例教程</h2>
<h3 id="_20">反馈案例需求描述</h3>
<p>用户反馈是移动开发中最常见的功能，可以用来收集我们的用户对软件的意见和建议。通常在开发用户反馈功能时，我们都会将用户反馈的信息保存到服务器中，定期登录后台管理系统查看，这样很难做到实时查看用户反馈信息。本文结合Bmob推送服务和数据存储服务开发用户反馈功能，实现用户提交反馈信息保存在Bmob云数据库的同时，也将用户的反馈信息推送到运营/研发人员的设备中。</p>
<p>本案例将使用到Bmob的如下功能：</p>
<p>1.推送服务
将用户的反馈信息实时推送到订阅了接收反馈信息的设备中，实现端到端的消息传递。</p>
<p>2.数据存储服务</p>
<p>添加和查看反馈信息，使用到了添加、查询和按时间排序的功能。</p>
<p>本案例最终实现的界面效果如下：</p>
<p><img alt="" src="../image/image001.jpg" /> </p>
<p>发送反馈截图</p>
<p><img alt="" src="../image/image002.jpg" /> </p>
<p>查看反馈意见截图</p>
<h3 id="_21">反馈案例数据结构设计</h3>
<p>在Bmob开发者后台创建一个应用（还不知道怎么创建应用和添加数据表的开发朋友请先移步<a href="http://docs.bmob.cn/data/Android/a_faststart/doc/index.html" title="快速入门指南">快速入门指南</a>查看相关教程），添加两个表，分别是Feedback（用户反馈信息表，存储用户提交的反馈信息）和Installation（设备安装表，存储需要接收推送信息的设备信息）。以下是对这两个表的数据结构的详细描述（省略对常用默认字段objectId、createAt、updateAt的描述）</p>
<p>Feedback表</p>
<table>
<thead>
<tr>
<th align="left">字段名</th>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">Contact</td>
<td align="left">String</td>
<td align="left">用户的联系方式</td>
</tr>
<tr>
<td align="left">deviceType</td>
<td align="left">String</td>
<td align="left">系统字段，是一个必须的字段, 必须被设置为 "ios" 或者 "android", 而且自这个对象生成以后就不能变化</td>
</tr>
</tbody>
</table>
<p>Installation表</p>
<table>
<thead>
<tr>
<th align="left">字段名</th>
<th align="left">类型</th>
<th align="left">描述</th>
</tr>
</thead>
<tbody>
<tr>
<td align="left">installationId</td>
<td align="left">String</td>
<td align="left">系统字段，是一个Bmob生成的字符串标志, 而且如果 deviceType 是 android 的话是一个必填字段, 如果是 ios 的话则可选. 它只要对象被生成了就不能发生改变, 而且对一个 app 来说是不可重复的</td>
</tr>
<tr>
<td align="left">deviceToken</td>
<td align="left">String</td>
<td align="left">系统字段，是一个 Apple 生成的字符串标志, 在 deviceType 为 ios 上的设备是必须的, 而且自对象生成开始就不能改动, 对于一个 app 来说也是不可重复的</td>
</tr>
<tr>
<td align="left">badge</td>
<td align="left">Number</td>
<td align="left">系统字段，表示iOS 设备最新已知的应用badge</td>
</tr>
<tr>
<td align="left">timeZone</td>
<td align="left">String</td>
<td align="left">系统字段，表示安装的这个设备的系统时区</td>
</tr>
<tr>
<td align="left">channels</td>
<td align="left">Array</td>
<td align="left">系统字段，表示这个安装对象的订阅频道列表</td>
</tr>
<tr>
<td align="left">appIdentifiter</td>
<td align="left">String</td>
<td align="left">iOS应用的Bundle identifier</td>
</tr>
<tr>
<td align="left">isDeveloper</td>
<td align="left">Boolean</td>
<td align="left">是否是开发者（是的话则用于接收推送信息）</td>
</tr>
</tbody>
</table>
<h3 id="_22">安装和初始化</h3>
<p>还不知道怎么安装使用Bmob数据存储Sdk的开发朋友请先移步快速入门指南查看相关教程。
推送服务的SDK初始化和Bmob数据存储SDK一样，只需要在Activity的onCreate方法中简单调用BmobPush.startWork方法就可以了，代码如下（详细代码见MainActivity类）：</p>
<pre><code class="java">//这里替换为你的APP Key
    public static String APPID = &quot;&quot;;    

    @Override
    protected void onCreate(Bundle savedInstanceState) {
        super.onCreate(savedInstanceState);
        setContentView(R.layout.activity_main);

        Bmob.initialize(this, APPID);
        BmobPush.startWork(this, APPID);    
    }
</code></pre>

<h3 id="_23">发送反馈功能的开发</h3>
<p>这里要实现的是当用户点击“发送”反馈按钮之后，先把用户的反馈信息上传到Bmob云数据库中，然后发送一条推送信息到Installation表中isDeveloper为true的设备中去。</p>
<p>为实现将数据保存到云数据库的功能，你首先需要先创建一个Feedback类（需要与刚刚创建的数据表Feedback名称对应一致），该类继承自BmobObject类，实现contact和content的set和get方法。实现代码如下（详细代码见Feedback类）：</p>
<pre><code class="java">public class Feedback extends BmobObject {
    //反馈内容
    private String content;
    //联系方式
    private String contacts;
    public String getContent() {
        return content;
    }
    public void setContent(String content) {
        this.content = content;
    }
    public String getContacts() {
        return contacts;
    }
    public void setContacts(String contacts) {
        this.contacts = contacts;
    }
}
</code></pre>

<p>有了Feedback类，你就可以方便的通过BmobObject的insertObject方法操作云数据库，将数据保存上去了。实现代码如下（详细代码见ActSendFeedback类）：</p>
<pre><code class="java">    /**
     * 保存反馈信息到Bmob云数据库中
     * @param msg 反馈信息
     */
    private void saveFeedbackMsg(String msg){
        Feedback feedback = new Feedback();
        feedback.setContent(msg);
        feedback.save(this, new SaveListener() {

            @Override
            public void onSuccess() {
                Log.i(&quot;bmob&quot;, &quot;反馈信息已保存到服务器&quot;);
                //发送推送信息
                saveFeedbackMsg(message);
            }

            @Override
            public void onFailure(int code, String arg0) {
                // TODO Auto-generated method stub
                Log.e(&quot;bmob&quot;, &quot;保存反馈信息失败：&quot;+arg0);
            }
        });
    }
</code></pre>

<pre><code class="java">    /**
     * 推送反馈信息给isDeveloper的设备
     * @param message 反馈信息
     */
    private void sendMessage(String message){
        BmobPushManager bmobPush = new BmobPushManager(this);
        BmobQuery&lt;BmobInstallation&gt; query = BmobInstallation.getQuery();
        query.addWhereEqualTo(&quot;isDeveloper&quot;, true);
        bmobPush.setQuery(query);
        bmobPush.pushMessage(message);
    }
</code></pre>

<h3 id="_24">查看反馈功能的开发</h3>
<p>为了接收用户端推送过来的反馈信息，查看反馈端需要自定义一个继承自BmobPushMessageReceiver的类，用于处理接收到的推送信息。实现代码如下：</p>
<pre><code class="java">public class MyMessageReceiver extends BmobPushMessageReceiver {

    @Override
    public void onMessage(Context context, String message) {
        Log.d(&quot;bmob&quot;, &quot;收到反馈消息 = &quot;+message);
        //通知栏显示收到的反馈信息
        NotificationManager nm = (NotificationManager) context.getSystemService(Context.NOTIFICATION_SERVICE);
        Notification n = new Notification();  
        n.icon = R.drawable.ic_launcher;  
        n.tickerText = &quot;收到反馈消息&quot;;  
        n.when = System.currentTimeMillis();  
        Intent intent = new Intent(context, ActFeedbackList.class);  
        PendingIntent pi = PendingIntent.getActivity(context, 0, intent, 0);  
        n.setLatestEventInfo(context, &quot;消息&quot;, message, pi);  
        n.defaults |= Notification.DEFAULT_SOUND;
        n.flags = Notification.FLAG_AUTO_CANCEL;
        nm.notify(1, n);
    }
}
</code></pre>

<p>查看反馈列表的功能实现也很简单，只需要调用BmobObject的findObjects方法就可以了，实现代码如下（详细代码见ActFeedbackList类）：</p>
<pre><code class="java">BmobQuery&lt;Feedback&gt; query = new BmobQuery&lt;Feedback&gt;();
//按createAt降序排列
query.order(&quot;-createdAt&quot;);
query.findObjects(this, new FindListener&lt;Feedback&gt;() {

    @Override
    public void onSuccess(List&lt;Feedback&gt; arg0) {
        //显示反馈列表信息
        adapter = new FeedbackAdapter(ActFeedbackList.this, arg0);
        listView.setAdapter(adapter);
    }

    @Override
    public void onError(int code, String arg0) {
        emptyView.setText(arg0);
    }
});
</code></pre>

<h3 id="_25">反馈案例后记</h3>
<p>当然了，实际使用过程的反馈功能可能并没有那么简单，或许你需要实现能够直接跟用户对话的反馈功能，或许你想要实现智能化的机器回答，这些都可以使用Bmob移动云服务平台进行快速设计和开发的。欢迎各位砸砖，欢迎提出更多的意见和建议帮助Bmob更好的发展。谢谢～</p>
<h3 id="_26">反馈案例案例下载</h3>
<p><a href="https://github.com/bmob/bmob-app-demo-show/blob/master/download/android_feedback_demo.zip" title="反馈案例下载">反馈案例下载</a></p>
<h2 id="_27">其它案例</h2>
<p>快速入门相关源码下载<a href="http://www.bmob.cn/static/Bmob_android_quickstart.zip">http://www.bmob.cn/static/Bmob_android_quickstart.zip</a></p>
<p>即时聊天案例源码<a href="https://github.com/bmob/BmobIMSDK4Android">https://github.com/bmob/BmobIMSDK4Android</a></p>
<p>图文社区案例源码：<a href="https://git.oschina.net/v7/Wonderful">https://git.oschina.net/v7/Wonderful</a>  这个案例是猿圈媛圈开发团队提供的。</p>
<p>图文分享案例源码：<a href="https://github.com/smartbetter/AndroidWonderful">https://github.com/smartbetter/AndroidWonderful</a> 这个案例是一个叫郭朝的开发者提供的。</p>
<p>校园小菜案例源码：<a href="https://github.com/bmob/Shop">https://github.com/bmob/Shop</a> 这个案例是湖工大的朋友提供的。</p>
<p>社交分享案例源码：<a href="https://github.com/bmob/bmob-android-social-share">https://github.com/bmob/bmob-android-social-share</a> 这个是金刚锁开发者提供的</p>
<p>第三方登录案例源码：<a href="https://github.com/bmob/bmob-android-demo-thirdpartylogin">https://github.com/bmob/bmob-android-demo-thirdpartylogin</a>  包含第三方登录和登录后获取用户信息的源码。</p>
<p>自定义表名情况下增删改查数据的Demo，下载地址是：<a href="https://github.com/bmob/bmob-android-demo-dynamic-tablename">https://github.com/bmob/bmob-android-demo-dynamic-tablename</a>。</p>
<p>使用分页查询，结合ListView开发下拉刷新查看更多内容<a href="https://github.com/bmob/bmob-android-demo-paging">https://github.com/bmob/bmob-android-demo-paging</a>。</p>
<p>短信验证的demo：<a href="https://github.com/bmob/bmob_android_demo_sms">https://github.com/bmob/bmob_android_demo_sms</a> 。</p>
<p>缩略图案例源码：<a href="https://github.com/bmob/bmob-android-demo-thumbnail">https://github.com/bmob/bmob-android-demo-thumbnail</a></p>
<p>数据的实时同步服务应用实例（ <a href="https://github.com/bmob/bmob-android-demo-realtime-data">https://github.com/bmob/bmob-android-demo-realtime-data</a> ）供大家参考。</p>
<p>ACL相关的案例源码：<a href="https://github.com/bmob/bmob-android-demo-acl">https://github.com/bmob/bmob-android-demo-acl</a></p>
<p>推送案例Demo:<a href="https://github.com/bmob/bmob-android-demo-push">https://github.com/bmob/bmob-android-demo-push</a></p>
<p>BmobSDK自动更新实例程序源码：<a href="https://github.com/bmob/bmob-android-demo-autoupdate">https://github.com/bmob/bmob-android-demo-autoupdate</a></p>
<p>踢球吧源码<a href="https://github.com/bmob/BmobTiQiuBa">https://github.com/bmob/BmobTiQiuBa</a></p>
<p>android云端逻辑案例:<a href="http://www.bmob.cn/static/Bmob_Sample_android_cloud.zip">http://www.bmob.cn/static/Bmob_Sample_android_cloud.zip</a></p>
<p>基于Bmob的二维码扫描工具:<a href="https://github.com/bmob/FindLook">https://github.com/bmob/FindLook</a></p></div>
        </div>

        <footer class="col-md-12">
            <hr>
                <p>Copyright © 2017 [Bmob](http://www.bmob.cn), Maintained by the Bmob Support.</p>
            <p>Documentation built with <a href="http://www.mkdocs.org/">MkDocs</a>.</p>
        </footer>
        <script>var base_url = '..';</script>
        <script data-main="../mkdocs/js/search.js" src="../mkdocs/js/require.js"></script>
        <script src="../js/base.js"></script><div class="modal" id="mkdocs_search_modal" tabindex="-1" role="dialog" aria-labelledby="Search Modal" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal"><span aria-hidden="true">&times;</span><span class="sr-only">Close</span></button>
                <h4 class="modal-title" id="exampleModalLabel">Search</h4>
            </div>
            <div class="modal-body">
                <p>
                    From here you can search these documents. Enter
                    your search terms below.
                </p>
                <form role="form">
                    <div class="form-group">
                        <input type="text" class="form-control" placeholder="Search..." id="mkdocs-search-query">
                    </div>
                </form>
                <div id="mkdocs-search-results"></div>
            </div>
            <div class="modal-footer">
            </div>
        </div>
    </div>
</div>

    </body>
</html>
